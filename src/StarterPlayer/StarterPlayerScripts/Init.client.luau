local ReplicatedStorage = game:GetService("ReplicatedStorage")
local controllersFolder = script.Parent:WaitForChild("Controllers") -- ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏°‡πà

print("üîå Client Init: Starting Controllers...")

-- ‡πÅ‡∏Å‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÉ‡∏ô‡∏•‡∏π‡∏õ‡∏à‡∏≤‡∏Å controllersFolder ‡πÄ‡∏õ‡πá‡∏ô moduleScript
for _, moduleScript in ipairs(controllersFolder:GetChildren()) do
    if moduleScript:IsA("ModuleScript") then
        task.spawn(function()
            -- require ‡∏ï‡∏±‡∏ß‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏•‡∏π‡∏Å
            local controller = require(moduleScript) 
            
            if type(controller.Init) == "function" then
                local success, err = pcall(function()
                    controller:Init() 
                end)
                
                if not success then
                    -- ‡πÄ‡∏ß‡∏•‡∏≤ Error ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏ô‡∏û‡∏±‡∏á
                    warn("‚ùå Failed to init " .. moduleScript.Name .. ": " .. err) 
                end
            end
        end)
    end
end

print("‚úÖ Controllers initialized.")

local NetworkController = require(controllersFolder:WaitForChild("NetworkController"))
local DemoController = require(controllersFolder:WaitForChild("DemoController")) -- Add demo

-- Initialize
print("[Init] Initializing NetworkController...")
NetworkController:Init()

print("[Init] Initializing DemoController...")
DemoController:Init()

-- Start
print("[Init] Starting controllers...")
NetworkController:Start()
DemoController:Start()

print("‚úÖ Client initialized successfully.")
print("üéÆ Demo Mode: Press F9 and use DemoController methods")

-- Make DemoController globally accessible for testing
_G.DemoController = DemoController