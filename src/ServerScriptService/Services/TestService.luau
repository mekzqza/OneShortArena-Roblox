--!strict

-- à¹„à¸Ÿà¸¥à¹Œà¸™à¸µà¹‰à¹ƒà¸Šà¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸—à¸”à¸ªà¸­à¸š server-side services
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local ServerScriptService = game:GetService("ServerScriptService")

local Events = require(ReplicatedStorage.Shared.Events)
local EventBus = require(ReplicatedStorage.SystemsShared.EventBus)
local NetworkHandler = require(ServerScriptService.Services.Core.NetworkHandler)

-- âœ… à¹à¸à¹‰à¹„à¸‚: à¹ƒà¸Šà¹‰ IdempotentGuard à¸ªà¸³à¸«à¸£à¸±à¸š Init/Start protection
local IdempotentGuard = require(ServerScriptService.Utils.IdempotentGuard)

-- âœ… ExecutionGuard à¹ƒà¸Šà¹‰à¹à¸¢à¸à¸ªà¸³à¸«à¸£à¸±à¸š demos
local ExecutionGuard = require(ServerScriptService.Utils.ExecutionGuard)

export type TestService = {
    Init: (self: TestService) -> (),
    Start: (self: TestService) -> (),
    [string]: any,
}

local TestService = {} :: TestService

-- âœ… à¹à¸à¹‰à¹„à¸‚: à¹ƒà¸Šà¹‰ IdempotentGuard à¸ªà¸³à¸«à¸£à¸±à¸š service lifecycle
local guard = IdempotentGuard.new("TestService", true)

-- âœ… ExecutionGuard à¸ªà¸³à¸«à¸£à¸±à¸š demos
local execGuard = ExecutionGuard.new(true)


-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- DEMO FUNCTIONS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--[[]
    DEMO 1: RunOnce - Load Player Data
    
    âœ… Use Case: Load player data from DataStore only once
    âœ… Feature: Cached result, subsequent calls return cached data
]]
local function loadPlayerData(userId: number): any?
    local key = `player_data_{userId}`
    
    -- âœ… à¹ƒà¸Šà¹‰ execGuard à¹à¸—à¸™ guard
    local success, result = execGuard:RunOnce(key, function()
        print(`[TestService] ğŸ’¾ Loading data for user {userId}...`)
        
        -- Simulate expensive operation
        task.wait(2)
        
        return {
            userId = userId,
            coins = 1000,
            level = 5,
            loadedAt = os.clock()
        }
    end, {
        timeout = 10,           -- 10 second timeout
        cacheResult = true,     -- Cache the result
        allowRerun = false,     -- Don't allow re-execution
    })
    
    return result
end

--[[]
    DEMO 2: RunOnce with Timeout
    
    âœ… Use Case: API call that might hang
    âœ… Feature: Auto-timeout after X seconds
]]
local function fetchExternalData(apiUrl: string): any?
    local key = `api_fetch_{apiUrl}`
    
    local success, result = execGuard:RunOnce(key, function()
        print(`[TestService] ğŸŒ Fetching from {apiUrl}...`)
        
        -- Simulate slow API
        task.wait(5)
        
        return {
            data = "API response",
            timestamp = os.clock()
        }
    end, {
        timeout = 3,  -- â±ï¸ Timeout after 3 seconds (will fail!)
        onTimeout = function()
            warn(`[TestService] âš ï¸ API call to {apiUrl} timed out!`)
        end
    })
    
    return result
end

--[[]
    DEMO 3: Prevent Concurrent Execution
    
    âœ… Use Case: Process order only once, even if multiple requests
    âœ… Feature: In-progress lock
]]
local function processOrder(orderId: number): boolean
    local key = `order_{orderId}`
    
    local success, result = execGuard:RunOnce(key, function()
        print(`[TestService] ğŸ“¦ Processing order {orderId}...`)
        
        -- Simulate order processing
        task.wait(3)
        
        return {
            orderId = orderId,
            status = "completed",
            processedAt = os.clock()
        }
    end, {
        timeout = 10,
        cacheResult = false,  -- Don't cache (one-time operation)
    })
    
    return success
end

--[[]
    DEMO 4: Manual Lock Management
    
    âœ… Use Case: Complex operation with manual control
]]
local function complexOperation(taskId: string)
    if not execGuard:AcquireLock(taskId, 5) then
        warn(`[TestService] ğŸ”’ Failed to acquire lock for {taskId}`)
        return false
    end
    
    print(`[TestService] ğŸ”“ Lock acquired for {taskId}`)
    
    -- Do work
    task.wait(2)
    print(`[TestService] âœ… Work completed for {taskId}`)
    
    -- Release lock
    execGuard:ReleaseLock(taskId)
    
    return true
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SERVICE IMPLEMENTATION
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function TestService:Init()
    -- âœ… à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹à¸¥à¹‰à¸§: à¹ƒà¸Šà¹‰ IdempotentGuard
    if not guard:MarkInitialized() then
        return
    end
    
    -- âœ… à¹à¸à¹‰à¹„à¸‚: à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ˆà¸²à¸ AllowServerEvent â†’ AllowClientEvent
    NetworkHandler:AllowClientEvent(Events.TEST_PING)
    
    print("[TestService] ğŸ§ª Initialized")
end

function TestService:Start()
    -- âœ… à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹à¸¥à¹‰à¸§: à¹ƒà¸Šà¹‰ IdempotentGuard
    if not guard:MarkStarted() then
        return
    end
    
    -- Listen for TEST_PING from client
    EventBus:On(Events.TEST_PING, function(player: Player, payload: any)
        print(string.format("[TestService-Server] ğŸ“¨ Received from %s", player.Name))
        
        if type(payload) ~= "table" then
            warn("[TestService-Server] âŒ Payload is not a table!")
            return
        end
        
        -- âœ… DEMO: Use ExecutionGuard to load player data
        print("\nğŸ¯ DEMO 1: Loading Player Data (RunOnce)")
        print("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
        
        local data1 = loadPlayerData(player.UserId)
        print("First call result:", data1)
        
        task.wait(0.5)
        
        local data2 = loadPlayerData(player.UserId)
        print("Second call result (cached):", data2)
        print("Same object?", data1 == data2)  -- Should be true
        
        -- âœ… DEMO: Test timeout
        print("\nğŸ¯ DEMO 2: Timeout Test")
        print("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
        
        local apiResult = fetchExternalData("https://api.example.com")
        print("API result:", apiResult)  -- Should be nil (timed out)
        
        -- âœ… DEMO: Concurrent execution prevention
        print("\nğŸ¯ DEMO 3: Concurrent Execution Prevention")
        print("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
        
        -- Simulate two simultaneous requests
        task.spawn(function()
            local success = processOrder(12345)
            print("Thread 1 result:", success)
        end)
        
        task.wait(0.1)
        
        task.spawn(function()
            local success = processOrder(12345)  -- Same order!
            print("Thread 2 result:", success)  -- Should be false (blocked)
        end)
        
        task.wait(4)
        
        -- âœ… DEMO: Get execution status
        print("\nğŸ¯ DEMO 4: Query Status")
        print("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
        
        -- âœ… à¹à¸à¹‰à¹„à¸‚: à¹ƒà¸Šà¹‰ execGuard à¹ƒà¸™à¸à¸²à¸£ query
        local status = execGuard:GetStatus(`player_data_{player.UserId}`)
        print("Player data status:", status)
        
        local hasResult = execGuard:HasResult(`player_data_{player.UserId}`)
        print("Has cached result?", hasResult)
        
        -- âœ… DEMO: Manual lock
        print("\nğŸ¯ DEMO 5: Manual Lock Management")
        print("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
        
        complexOperation("task_001")
        
        -- âœ… à¹à¸à¹‰à¹„à¸‚: Print summary à¸‚à¸­à¸‡ execGuard
        print("\nğŸ“Š ExecutionGuard Summary:")
        print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
        ExecutionGuard.printSummary(execGuard)
        
        -- âœ… Send response
        NetworkHandler:SendToClient(player, Events.TEST_PONG, {
            success = true,
            message = "ExecutionGuard demos completed!",
            serverTime = os.clock()
        })
    end)
    
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    -- PERIODIC ANALYTICS
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    -- task.spawn(function()
    --     while true do
    --         task.wait(60)  -- Every minute
            
    --         local analytics = guard:GetAnalytics()
            
    --         print("\nğŸ“Š [TestService] ExecutionGuard Analytics:")
    --         print(string.format("  Total Executions: %d", analytics.global.totalExecutions))
    --         print(string.format("  Blocked: %d", analytics.global.blockedExecutions))
    --         print(string.format("  Cached Results: %d", analytics.global.cachedResults))
    --         print(string.format("  Timed Out: %d", analytics.global.timedOutExecutions))
    --         print(string.format("  Failed: %d", analytics.global.failedExecutions))
    --     end
    -- end)
    
    print("[TestService-Server] ğŸš€ Started - Listening for TEST_PING")
end

return TestService

--[[]
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ“š TEST SERVICE - à¸ªà¸£à¸¸à¸›à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ DEMO              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                â•‘
â•‘ ğŸ¯ PURPOSE (à¸ˆà¸¸à¸”à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ):                                       â•‘
â•‘    à¸ªà¸²à¸˜à¸´à¸•à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ ExecutionGuard à¹ƒà¸™à¸—à¸¸à¸à¸£à¸¹à¸›à¹à¸šà¸š                  â•‘
â•‘    à¸—à¸”à¸ªà¸­à¸š Network, EventBus, à¹à¸¥à¸° ExecutionGuard                â•‘
â•‘                                                                â•‘
â•‘ ğŸ§ª DEMOS INCLUDED (à¸à¸²à¸£à¸ªà¸²à¸˜à¸´à¸•à¸—à¸µà¹ˆà¸¡à¸µ):                            â•‘
â•‘                                                                â•‘
â•‘    DEMO 1: RunOnce - Load Player Data                        â•‘
â•‘    â”œâ”€ à¹à¸ªà¸”à¸‡à¸à¸²à¸£ cache à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ                                   â•‘
â•‘    â”œâ”€ à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸à¸„à¸£à¸±à¹‰à¸‡à¸—à¸µà¹ˆ 2 à¹„à¸”à¹‰à¸œà¸¥à¸—à¸±à¸™à¸—à¸µ (cached)                 â•‘
â•‘    â””â”€ Use Case: DataStore operations                         â•‘
â•‘                                                                â•‘
â•‘    DEMO 2: Timeout Test                                       â•‘
â•‘    â”œâ”€ à¹à¸ªà¸”à¸‡à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡ timeout                                 â•‘
â•‘    â”œâ”€ onTimeout callback à¸–à¸¹à¸à¹€à¸£à¸µà¸¢à¸                             â•‘
â•‘    â””â”€ Use Case: External API calls                           â•‘
â•‘                                                                â•‘
â•‘    DEMO 3: Concurrent Execution Prevention                    â•‘
â•‘    â”œâ”€ à¹à¸ªà¸”à¸‡ in-progress lock                                   â•‘
â•‘    â”œâ”€ Thread 2 à¸–à¸¹à¸ block à¹€à¸à¸£à¸²à¸° Thread 1 à¸à¸³à¸¥à¸±à¸‡à¸—à¸³à¸‡à¸²à¸™          â•‘
â•‘    â””â”€ Use Case: Payment processing, Order processing         â•‘
â•‘                                                                â•‘
â•‘    DEMO 4: Query Status                                       â•‘
â•‘    â”œâ”€ à¹à¸ªà¸”à¸‡à¸à¸²à¸£à¹€à¸Šà¹‡à¸„à¸ªà¸–à¸²à¸™à¸°                                         â•‘
â•‘    â”œâ”€ à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸¡à¸µ cached result à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ                   â•‘
â•‘    â””â”€ Use Case: Status monitoring                            â•‘
â•‘                                                                â•‘
â•‘    DEMO 5: Manual Lock Management                            â•‘
â•‘    â”œâ”€ à¹à¸ªà¸”à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰ AcquireLock/ReleaseLock                      â•‘
â•‘    â”œâ”€ à¸„à¸§à¸šà¸„à¸¸à¸¡ lock à¸”à¹‰à¸§à¸¢à¸•à¸±à¸§à¹€à¸­à¸‡                                  â•‘
â•‘    â””â”€ Use Case: Complex multi-step operations                â•‘
â•‘                                                                â•‘
â•‘ ğŸ“– HOW TO TEST (à¸§à¸´à¸˜à¸µà¸—à¸”à¸ªà¸­à¸š):                                    â•‘
â•‘                                                                â•‘
â•‘    1. à¹€à¸›à¸´à¸”à¹€à¸à¸¡à¹ƒà¸™ Roblox Studio                                 â•‘
â•‘    2. à¸à¸” F9 à¹€à¸›à¸´à¸” Console                                      â•‘
â•‘    3. à¸à¸” P (à¸«à¸£à¸·à¸­ key à¸—à¸µà¹ˆ bind TESTPING)                       â•‘
â•‘    4. à¸”à¸¹ console output                                       â•‘
â•‘                                                                â•‘
â•‘ ğŸ“ WHAT YOU'LL SEE (à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸ˆà¸°à¹€à¸«à¹‡à¸™):                           â•‘
â•‘                                                                â•‘
â•‘    [TestService] ğŸ’¾ Loading data for user 123...             â•‘
â•‘    First call result: {userId=123, coins=1000, ...}          â•‘
â•‘    Second call result (cached): {userId=123, ...}            â•‘
â•‘    Same object? true                                          â•‘
â•‘                                                                â•‘
â•‘    [TestService] âš ï¸ API call timed out!                       â•‘
â•‘    API result: nil                                            â•‘
â•‘                                                                â•‘
â•‘    Thread 1 result: true                                      â•‘
â•‘    Thread 2 result: false  (blocked)                          â•‘
â•‘                                                                â•‘
â•‘    Player data status: Completed                              â•‘
â•‘    Has cached result? true                                    â•‘
â•‘                                                                â•‘
â•‘    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                 â•‘
â•‘    â•‘    EXECUTION GUARD SUMMARY             â•‘                 â•‘
â•‘    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£                 â•‘
â•‘    â•‘ Total Records: 3                       â•‘                 â•‘
â•‘    â•‘ Total Executions: 4                    â•‘                 â•‘
â•‘    â•‘ Blocked: 1 | Cached: 1                 â•‘                 â•‘
â•‘    â•‘ Timed Out: 1 | Failed: 0               â•‘                 â•‘
â•‘    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                 â•‘
â•‘                                                                â•‘
â•‘ ğŸ’¡ LEARNING POINTS (à¸ˆà¸¸à¸”à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰):                              â•‘
â•‘                                                                â•‘
â•‘    âœ… RunOnce à¸ˆà¸° cache à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ â†’ à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸à¸‹à¹‰à¸³à¹„à¸”à¹‰à¸œà¸¥à¸—à¸±à¸™à¸—à¸µ      â•‘
â•‘    âœ… Timeout à¸ˆà¸°à¸›à¸¥à¹ˆà¸­à¸¢ lock à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´ â†’ à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ deadlock      â•‘
â•‘    âœ… In-progress lock â†’ à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ concurrent execution        â•‘
â•‘    âœ… Status query â†’ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°à¹„à¸”à¹‰à¸•à¸¥à¸­à¸”à¹€à¸§à¸¥à¸²                 â•‘
â•‘    âœ… Manual lock â†’ à¸„à¸§à¸šà¸„à¸¸à¸¡à¹„à¸”à¹‰à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”                          â•‘
â•‘                                                                â•‘
â•‘ ğŸ”§ CUSTOMIZATION (à¸›à¸£à¸±à¸šà¹à¸•à¹ˆà¸‡):                                  â•‘
â•‘                                                                â•‘
â•‘    à¹à¸à¹‰ timeout:                                               â•‘
â•‘    timeout = 10  -- à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸›à¹‡à¸™ 5, 15, 30, etc.             â•‘
â•‘                                                                â•‘
â•‘    à¸›à¸´à¸” cache:                                                 â•‘
â•‘    cacheResult = false  -- à¹„à¸¡à¹ˆà¹€à¸à¹‡à¸šà¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ                    â•‘
â•‘                                                                â•‘
â•‘    à¸­à¸™à¸¸à¸à¸²à¸•à¸£à¸±à¸™à¸‹à¹‰à¸³:                                               â•‘
â•‘    allowRerun = true  -- à¸£à¸±à¸™à¹„à¸”à¹‰à¸«à¸¥à¸²à¸¢à¸„à¸£à¸±à¹‰à¸‡                     â•‘
â•‘                                                                â•‘
â•‘ ğŸ“Š PERIODIC ANALYTICS (à¸ªà¸–à¸´à¸•à¸´à¹à¸šà¸š Real-time):                   â•‘
â•‘                                                                â•‘
â•‘    Service à¸ˆà¸°à¹à¸ªà¸”à¸‡à¸ªà¸–à¸´à¸•à¸´à¸—à¸¸à¸ 60 à¸§à¸´à¸™à¸²à¸—à¸µ:                          â•‘
â•‘    â€¢ Total Executions                                         â•‘
â•‘    â€¢ Blocked Executions                                       â•‘
â•‘    â€¢ Cached Results                                           â•‘
â•‘    â€¢ Timed Out                                                â•‘
â•‘    â€¢ Failed                                                   â•‘
â•‘                                                                â•‘
â•‘ ğŸ¯ USE THIS AS TEMPLATE (à¹ƒà¸Šà¹‰à¹€à¸›à¹‡à¸™à¹à¸¡à¹ˆà¹à¸šà¸š):                      â•‘
â•‘                                                                â•‘
â•‘    à¸„à¸±à¸”à¸¥à¸­à¸ pattern à¸ˆà¸²à¸ demo functions:                         â•‘
â•‘    â€¢ loadPlayerData()     â†’ DataStore operations             â•‘
â•‘    â€¢ fetchExternalData()  â†’ API calls                        â•‘
â•‘    â€¢ processOrder()       â†’ Transactions                     â•‘
â•‘    â€¢ complexOperation()   â†’ Multi-step tasks                 â•‘
â•‘                                                                â•‘
â•‘ âš ï¸ IMPORTANT (à¸‚à¹‰à¸­à¸ªà¸³à¸„à¸±à¸):                                       â•‘
â•‘                                                                â•‘
â•‘    â€¢ à¸™à¸µà¹ˆà¸„à¸·à¸­ TEST SERVICE à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™              â•‘
â•‘    â€¢ Production à¹ƒà¸Šà¹‰ pattern à¹à¸•à¹ˆà¸¥à¸š demo code                  â•‘
â•‘    â€¢ Debug mode = true â†’ à¹€à¸«à¹‡à¸™ log à¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡                   â•‘
â•‘                                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TLDR (à¸ªà¸£à¸¸à¸›à¸ªà¸±à¹‰à¸™à¹†):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TestService = à¸ªà¸²à¸˜à¸´à¸•à¸à¸²à¸£à¹ƒà¸Šà¹‰ ExecutionGuard à¸„à¸£à¸šà¸—à¸¸à¸à¸£à¸¹à¸›à¹à¸šà¸š

à¸§à¸´à¸˜à¸µà¹ƒà¸Šà¹‰:
1. à¸à¸” P à¹ƒà¸™à¹€à¸à¸¡
2. à¸”à¸¹ Console
3. à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¸ˆà¸²à¸ output

Demos:
â€¢ Load Data (cache demo)
â€¢ Timeout (timeout demo)
â€¢ Concurrent (lock demo)
â€¢ Status (query demo)
â€¢ Manual Lock (advanced demo)

à¹€à¸«à¸¡à¸²à¸°à¸ªà¸³à¸«à¸£à¸±à¸š: à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰ ExecutionGuard pattern
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Version: Demo 1.0
Author: OneShortArena Team
Last Updated: 2024
]]